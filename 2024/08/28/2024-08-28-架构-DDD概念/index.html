<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta name="description" content="一、DDD领域驱动设计（Domain-Driven Design，简称DDD），DDD 是一种软件开发方法。">
<meta name="keywords" content="java">
<meta property="og:type" content="article">
<meta property="og:title" content="《架构》DDD概念">
<meta property="og:url" content="http://yoursite.com/2024/08/28/2024-08-28-架构-DDD概念/index.html">
<meta property="og:site_name" content="CHW&#39;s Notes">
<meta property="og:description" content="一、DDD领域驱动设计（Domain-Driven Design，简称DDD），DDD 是一种软件开发方法。">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://yoursite.com/2024/08/28/2024-08-28-架构-DDD概念/%E4%BB%80%E4%B9%88%E6%98%AFDDD.png">
<meta property="og:image" content="http://yoursite.com/2024/08/28/2024-08-28-架构-DDD概念/DDD%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5%E5%9B%BE.png">
<meta property="og:updated_time" content="2024-12-03T14:51:47.059Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="《架构》DDD概念">
<meta name="twitter:description" content="一、DDD领域驱动设计（Domain-Driven Design，简称DDD），DDD 是一种软件开发方法。">
<meta name="twitter:image" content="http://yoursite.com/2024/08/28/2024-08-28-架构-DDD概念/%E4%BB%80%E4%B9%88%E6%98%AFDDD.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2024/08/28/2024-08-28-架构-DDD概念/">





  <title>《架构》DDD概念 | CHW's Notes</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">CHW's Notes</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-fa fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2024/08/28/2024-08-28-架构-DDD概念/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="chw">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/touxiang.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CHW's Notes">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">《架构》DDD概念</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2024-08-28T10:00:00+08:00">
                2024-08-28
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/架构/" itemprop="url" rel="index">
                    <span itemprop="name">架构</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/架构/DDD/" itemprop="url" rel="index">
                    <span itemprop="name">DDD</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="page-pv">阅读数
            <span class="busuanzi-value" id="busuanzi_value_page_pv"></span>
            </span>
          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  9.2k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  31
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h3 id="一、DDD"><a href="#一、DDD" class="headerlink" title="一、DDD"></a>一、DDD</h3><p><img src="/2024/08/28/2024-08-28-架构-DDD概念/%E4%BB%80%E4%B9%88%E6%98%AFDDD.png" alt="什么是DDD"><br>领域驱动设计（Domain-Driven Design，简称DDD），DDD 是一种软件开发方法。</p>
<a id="more"></a>

<h3 id="二、DDD-的主要概念"><a href="#二、DDD-的主要概念" class="headerlink" title="二、DDD 的主要概念"></a>二、DDD 的主要概念</h3><p><img src="/2024/08/28/2024-08-28-架构-DDD概念/DDD%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5%E5%9B%BE.png" alt="DDD基本概念图"></p>
<hr>
<h4 id="2-1、通过类相关概念"><a href="#2-1、通过类相关概念" class="headerlink" title="2.1、通过类相关概念"></a>2.1、通过类相关概念</h4><p>一些通用的软件设计概念及DDD的概念。</p>
<h5 id="领域驱动设计（DDD）"><a href="#领域驱动设计（DDD）" class="headerlink" title="领域驱动设计（DDD）"></a>领域驱动设计（DDD）</h5><p>DDD 是 Domain-Driven Design 的缩写，是 Eric Evans 于 2004 年提出的一种软件设计方法和理念。</p>
<p>其主要的思想是，利用确定的业务模型来指导业务与应用的设计和实现。主张开发人员与业务人员持续地沟通和模型的持续迭代式演化，以保证业务模型与代码实现的一致性，从而实现有效管理业务复杂度，优化软件设计的目的。</p>
<h5 id="模型（Model）"><a href="#模型（Model）" class="headerlink" title="模型（Model）"></a>模型（Model）</h5><p>通常，模型是对对象、人或系统的信息表示。它通过较为简单的信息结构来代表我们需要理解的复杂事物或系统。</p>
<p>地图、乐高、算筹都是模型，模型可以简化复杂事务的认知。我们天生就有用简单的东西代表另外一个东西的能力，比如幼儿园数数用的竹签，学习物理时的刚体、真空中的球形鸡，都是模型。通俗来说模型就是经验的抽象集合，平时听到的谚语、公式、定理，本质上都是一种模型。</p>
<h5 id="领域模型（Domain-Model）"><a href="#领域模型（Domain-Model）" class="headerlink" title="领域模型（Domain Model）"></a>领域模型（Domain Model）</h5><p>是对领域内的概念类和它们之间关系的抽象表示。它是 DDD 的核心部分，通过领域模型可以清晰地描述业务领域的结构和行为。例如，在电商系统的订单处理领域中，领域模型可能包括 “订单” 类、“订单项” 类、“商品” 类以及它们之间的关联关系（如一个订单包含多个订单项，一个订单项对应一个商品）。这些类具有各自的属性（如订单的金额、订单项的数量、商品的价格等）和行为（如订单的创建、订单项的添加、商品价格的计算等）。</p>
<h5 id="建模（Modeling）"><a href="#建模（Modeling）" class="headerlink" title="建模（Modeling）"></a>建模（Modeling）</h5><p>建模是构建模型的过程。</p>
<p>在软件设计过程中，通过分析业务，将业务需求使用合适的模型表示出来，是建模的任务。模型可以作为业务分析的产出，并作为软件设计的重要理论基础。 比如在分析一个电商应用的业务时，抽象出订单、商品等概念，进一步定义出模型，并用合适的图例表达，往往是 UML 来表达。</p>
<h5 id="⭐️领域建模"><a href="#⭐️领域建模" class="headerlink" title="⭐️领域建模"></a>⭐️领域建模</h5><p>DDD最关键的部分—— 领域建模 ，它的目的归纳起来就一句话： 提炼业务知识，形成统一语言，沉淀领域模型 。</p>
<p>以下是领域建模的交付物：</p>
<ul>
<li><strong>领域模型：</strong> 包含领域对象、属性、关系、行为、边界范围等各个方面，用于描述业务的本质，这也是最重要的产出物。</li>
<li><strong>用例图：</strong> 用于明确系统的功能。</li>
<li><strong>数据模型：</strong> 描述系统的数据结构和关系，包括实体关系模型、关系数据库模型等。</li>
<li><strong>状态图：</strong> 用于描述系统各个状态及其转移条件。</li>
<li><strong>活动图：</strong> 用于描述系统流程中的各个活动及其关系。</li>
<li><strong>序列图：</strong> 描述系统中各个对象之间的交互过程和消息传递序列。</li>
<li><strong>架构模型：</strong> 包含系统的物理和逻辑结构，包括组件、模块、接口等。</li>
</ul>
<h5 id="模型驱动设计（Model-Driven-Design）"><a href="#模型驱动设计（Model-Driven-Design）" class="headerlink" title="模型驱动设计（Model-Driven Design）"></a>模型驱动设计（Model-Driven Design）</h5><p>面向模型的分析设计方法，优先通过识别模型来简化业务设计。</p>
<p>在设计过程中，以模型为中心，始终维护模型，并基于此指导软件设计。</p>
<h5 id="软件设计（The-Software-Design）"><a href="#软件设计（The-Software-Design）" class="headerlink" title="软件设计（The Software Design）"></a>软件设计（The Software Design）</h5><p>软件设计软件需求出发，对软件系统的整体结构、模块做出划分和规划，以便于具体代码的顺利编写。</p>
<p>由于软件需求具有非结构化、准确的语义，软件设计往往通过经验完成，无法通过某种特定的推理路线严格推导实现。</p>
<h5 id="战略设计（Strategic-Design）"><a href="#战略设计（Strategic-Design）" class="headerlink" title="战略设计（Strategic Design）"></a>战略设计（Strategic Design）</h5><p>战略设计也称为战略建模，是指对业务进行高层次的抽象和归类。主要手段包括理清上下文和进行子域的划分。</p>
<p>战略设计关注模型的分离，其解决的问题是大的模型如何划分为小模型以及相互之间如何关联。战略设计的产出可以用于指导团队协作，使得规模巨大的软件可以被合理拆分。</p>
<p>战略设计的产出通常为上下文图，以及模块或微服务划分。</p>
<h5 id="战术设计（Tactical-design）"><a href="#战术设计（Tactical-design）" class="headerlink" title="战术设计（Tactical design）"></a>战术设计（Tactical design）</h5><p>战术设计也称为战术建模，是指对特定上下文下的模型进行详细设计。</p>
<p>战术设计的对象包括聚合、实体和值对象，其目标是用明确它们是什么以及相互之间有何关系。战术设计的产出可以是用 UML 表达的类图，需要细化到具体的属性，同时确保在代码级别可实现。</p>
<h5 id="软件（Software）"><a href="#软件（Software）" class="headerlink" title="软件（Software）"></a>软件（Software）</h5><p>DDD 讨论下的软件是指，用于解决具体业务问题的计算机程序，既可以是单体也可以是分布式系统。</p>
<p>软件设计是 DDD 的最终目的，使用 DDD 的各种工具可以指导软件设计，最终构建出健壮、容易维护的软件。</p>
<h5 id="原则（Principle）"><a href="#原则（Principle）" class="headerlink" title="原则（Principle）"></a>原则（Principle）</h5><p>为了更好的践行 DDD，需要遵守几个原则: 通用语言、聚焦核心域、协作共创和持续建模。</p>
<p>这些原则是为了更好地服务业务，从业务驱动模型设计。</p>
<h5 id="通用语言（Ubiquitous）"><a href="#通用语言（Ubiquitous）" class="headerlink" title="通用语言（Ubiquitous）"></a>通用语言（Ubiquitous）</h5><p>通用语言（Ubiquitous language）是指在软件设计中，业务人员和开发人员需要使用无歧义的统一语言来对话。</p>
<p>这些语言包括对概念的统一理解和定义，以及业务人员参与到软件建模中，否则业务的变化会造成软件巨大的变化。</p>
<h5 id="聚焦核心域（Focus）"><a href="#聚焦核心域（Focus）" class="headerlink" title="聚焦核心域（Focus）"></a>聚焦核心域（Focus）</h5><p>核心域就是最关键的业务逻辑，聚焦核心域决定了软件的定位和投资重心。</p>
<h5 id="协作共创（Collaboration）"><a href="#协作共创（Collaboration）" class="headerlink" title="协作共创（Collaboration）"></a>协作共创（Collaboration）</h5><p>协作共创是指领域专家和业务专家共同建模。</p>
<h5 id="持续建模（Continuous）"><a href="#持续建模（Continuous）" class="headerlink" title="持续建模（Continuous）"></a>持续建模（Continuous）</h5><p>持续建模是指模型需要随业务变化而被及时更新。</p>
<h5 id="上下文（Context）"><a href="#上下文（Context）" class="headerlink" title="上下文（Context）"></a>上下文（Context）</h5><p>上下文是语言学科的概念，指不同语境下的概念虽然相同的用词，可能具有不同的含义。</p>
<p>在软件设计中，因为自然语言的原因，相同的用词导致实际是不同概念，会对建模和软件设计带来误导。同时，不同的上下文也是识别模型边界的手段。</p>
<hr>
<h4 id="2-2、领域分析类概念"><a href="#2-2、领域分析类概念" class="headerlink" title="2.2、领域分析类概念"></a>2.2、领域分析类概念</h4><p>DDD领域的相关概念。</p>
<h5 id="问题空间（Problem-Space）"><a href="#问题空间（Problem-Space）" class="headerlink" title="问题空间（Problem Space）"></a>问题空间（Problem Space）</h5><p>待解决的业务问题的集合。</p>
<p>在 DDD 实践中，我们应该明确区分问题空间和解空间，避免混为一谈。</p>
<h5 id="领域（Domain）"><a href="#领域（Domain）" class="headerlink" title="领域（Domain）"></a>领域（Domain）</h5><p>领域（Domain）是业务相关知识的集合。</p>
<p>通俗来说，领域就是业务知识。业务有一些内在规则，存在专业性，比如财务、CRM、OA、电商等不同领域的业务规则不同。计算机只是业务规则的自动化。</p>
<h5 id="子域（Sub-Domain）"><a href="#子域（Sub-Domain）" class="headerlink" title="子域（Sub Domain）"></a>子域（Sub Domain）</h5><p>子域（Subdomain）是指在一个大的领域中划分出的相对独立的子领域，它通常代表一个独立的业务领域，具有特定的业务逻辑和功能需求。子域可以是整个系统的一个功能模块，也可以是一个独立的业务流程。</p>
<h5 id="核心域（Core-Domain）"><a href="#核心域（Core-Domain）" class="headerlink" title="核心域（Core Domain）"></a>核心域（Core Domain）</h5><p>核心域是指领域中最核心的部分，通常对应企业的核心业务</p>
<p>核心域需要我们投入最大精力，进行充分的分析。因为它是一个企业能运转的基础。</p>
<h5 id="支撑域（Support-Domain）"><a href="#支撑域（Support-Domain）" class="headerlink" title="支撑域（Support Domain）"></a>支撑域（Support Domain）</h5><p>“支撑域”（Supporting Domain）指的是与核心业务的实现和发展密切相关的非业务功能。这些支撑域可以包括安全认证、用户管理、日志记录等在整个系统中被多个子域所共享和使用的基础设施功能。支撑域和通用域概念上有些类似，区分他们的标准简单归纳下的话，支撑域是由外域提供的能力，通用域是本域提供。</p>
<h5 id="通用域（General-Domain）"><a href="#通用域（General-Domain）" class="headerlink" title="通用域（General Domain）"></a>通用域（General Domain）</h5><p>通用域（Generic Domain）是指与特定业务领域无关的通用功能，它是在整个领域中被多个子域所共享和复用的功能。通用域包括一些通用的服务、工具、组件等，用于支持多个子域的实现。</p>
<hr>
<h4 id="2-3、建模类概念"><a href="#2-3、建模类概念" class="headerlink" title="2.3、建模类概念"></a>2.3、建模类概念</h4><p>DDD领域设计相关模型的定义。</p>
<h5 id="解空间（Solution-Space）"><a href="#解空间（Solution-Space）" class="headerlink" title="解空间（Solution Space）"></a>解空间（Solution Space）</h5><p>解空间是一个数学概念。是指满足问题的所有约束前提下，所有可行解的集合。在 DDD 的上下文中，指的是所有可能的解决方案的集合。</p>
<p>解空间是相对问题空间存在的，认识到解空间存在的好处是解空间可以通过一些方法从问题空间导出，而不是通过猜测得出的。</p>
<h5 id="领域模型（Model）"><a href="#领域模型（Model）" class="headerlink" title="领域模型（Model）"></a>领域模型（Model）</h5><p>领域模型（Model）是业务概念在程序中的一种表达方式。</p>
<p>领域模型可以用来设计和理解整个软件结构。面向对象设计中的类概念是领域模型的一种表达方式。与此类似，UML的建模方法也可以应用在对领域模型的表达上。在 DDD 实践中，领域模型应当尽量简洁，能反应业务概念即可。</p>
<h5 id="限界上下文（-Bounded-context）"><a href="#限界上下文（-Bounded-context）" class="headerlink" title="限界上下文（ Bounded context）"></a>限界上下文（ Bounded context）</h5><p>限界上下文是有明确边界的上下文。在 DDD 实践中领域模型会被限定在限界上下文当中。</p>
<p>限界上下文强调概念的一致性。虽然传统的方法学已经在追求概念的一致性，但是忽略了系统的庞大性，不论系统多庞大，在系统任何位置同一概念通用。DDD 不追求全局的一致性，而是将系统拆成多块，在相同的上下文中实现概念一致性。</p>
<p>识别上下文可以从概念的二义性着手，比如商品的概念在物流、交易、支付含义完全不一样，但具有不同内涵和外延，实际上他们处在不同上下文。</p>
<p>界限上下文可以用于微服务划分、避免模型的不正确复用带来的问题。</p>
<h5 id="实体（Entity）"><a href="#实体（Entity）" class="headerlink" title="实体（Entity）"></a>实体（Entity）</h5><p>实体（Entity）是在相同限界上下文中具有唯一标识的领域模型，可变，通过标识判断同一性。</p>
<blockquote>
<p>例：最简单的，公安系统的身份信息录入，对于人的模拟，即认为是实体，因为每个人是独一无二的，且其具有唯一标识（如公安系统分发的身份证号码）。</p>
</blockquote>
<ol>
<li><strong>贫血模型</strong> ：贫血模型是指领域对象只具有数据属性，缺乏相关的行为逻辑。在贫血模型中，业务逻辑主要存在于服务层或者其它外部对象中，领域对象仅被视为被动的数据容器。这种模型在领域驱动设计（DDD）中被认为是反模式，因为它无法更好地体现领域的核心概念和规则。</li>
<li><strong>失血模型</strong> ：和贫血模型相似，指的是领域对象缺少业务逻辑和领域行为，以至于数据和行为的重要部分都被丢失。这种模型经常出现在面向对象的开发中，尤其是基于关系数据库的实现中。</li>
<li><strong>充血模型</strong> ：充血模型是在领域对象中充分体现了业务逻辑和行为的模型。充血模型积极地包含了数据和相关的行为逻辑，它使得领域对象能够更好地封装与之相关的业务规则和行为，提供了更加一致和抽象的编程接口。充血模型是DDD中推崇的设计模式，使得领域对象能够成为业务规则的中心。</li>
<li><strong>涨血模型</strong> ：涨血模型是指在充血模型的基础上，进一步将领域对象的状态和行为扩展到前沿技术和新的设计模式中（有些理念力，涨血模型和充血模型的区别在于，涨血模型添加了持久层的行为）。</li>
</ol>
<blockquote>
<p>充血模型虽然是DDD中推崇的设计模式，通过领域实体，一些关键行为和逻辑其实也能一起拿到了，但是在我的经验中，我更喜欢使用 贫血+充血的混合模型 （或者叫充血模型的简化版），因为这里涉及到一个标准的建立问题，如果只用充血模型的话，哪些行为和逻辑该下方到接口服务层，哪些又该收拢到实体中，这里面每个人的理念不一样。而我的标准是， 涉及到持久层和复杂行为都下放到服务层，简单行为放到实体模型中 。这样有个好处，随着业务的发展，如果只用充血模型，你的实体会越来越臃肿；如果只有贫血模型，自身又太单薄。所以一部分行为下放到服务层，我可以更细粒度的拆分服务接口，保证更优良的边界和代码可读性，同时也保证了模型自身的健壮性。<br>最后，不论哪种模型，都没有绝对的好坏，能够很好的定义出设计标准，同时基于自己的理解设计出符合业务扩展的实体和服务就是好的模型。</p>
</blockquote>
<h5 id="值对象（Value-Object）"><a href="#值对象（Value-Object）" class="headerlink" title="值对象（Value Object）"></a>值对象（Value Object）</h5><p>值对象 （Value Ojbect）是一种特殊的领域模型，不可变，通过值判断同一性。</p>
<p>实体可以使用 ID 标识，但是值对象是用属性标识，任何属性的变化都视为新的值对象。比如一个银行账户，可以由 ID 唯一标识，币种和余额可以被修改但是还是同一个账户；交易单中的金额由币种和数值组成，无论修改哪一个属性，金额都不再是原来的金额。</p>
<blockquote>
<p>例：比如颜色信息，我们只需要知道{“name”:“黑色”，”css”:“#000000”}这样的值信息就能够满足要求了，这避免了我们对标识追踪带来的系统复杂性。</p>
</blockquote>
<p>值对象很重要，在习惯了使用数据库的数据建模后，很容易将所有对象看作实体。使用值对象，可以更好地做系统优化、精简设计。</p>
<h5 id="聚合（Aggregate）"><a href="#聚合（Aggregate）" class="headerlink" title="聚合（Aggregate）"></a>聚合（Aggregate）</h5><p>聚合（Aggregate）是一组生命周期强一致，修改规则强关联的实体和值对象的集合，表达统一的业务意义。</p>
<p>聚合的意义在于让业务统一、一致，在面向对象中有非常重要价值。比如，订单中有多个订单项，订单的总价是根据订单项目计算而来的。如果没有经验的开发者直接对订单项的做出修改，而不是由订单统一处理业务逻辑，会造成业务的一致性问题。</p>
<p>聚合需要在相同的上下文中，不能跨上下文。</p>
<h5 id="聚合根（-Aggregate-Root）"><a href="#聚合根（-Aggregate-Root）" class="headerlink" title="聚合根（ Aggregate Root）"></a>聚合根（ Aggregate Root）</h5><p>聚合根是聚合的根实体，它是一组相关对象的入口点，作为一个整体被外界访问，管理着聚合内其他对象的生命周期和完整性。聚合根通过封装聚合内部的对象，并定义了聚合的一致性边界，确保聚合内的对象之间的关系和约束得到维护。外部对象只能通过聚合根来访问和操作聚合内的对象，从而保证了聚合的完整性和一致性。</p>
<blockquote>
<p>聚合 = 聚合根实体 + 值对象 + 实体  组成。</p>
</blockquote>
<p>如何创建好的聚合？</p>
<blockquote>
<p>边界内的内容具有一致性：在一个事务中只修改一个聚合实例。如果你发现边界内很难接受强一致，不管是出于性能或产品需求的考虑，应该考虑剥离出独立的聚合，采用最终一致的方式。<br>设计小聚合：大部分的聚合都可以只包含根实体，而无需包含其他实体。即使一定要包含，可以考虑将其创建为值对象。<br>通过唯一标识来引用其他聚合或实体：当存在对象之间的关联时，建议引用其唯一标识而非引用其整体对象。如果是外部上下文中的实体，引用其唯一标识或将需要的属性构造值对象。 如果聚合创建复杂，推荐使用工厂方法来屏蔽内部复杂的创建逻辑。<br>聚合内部多个组成对象的关系可以用来指导数据库创建，但不可避免存在一定的抗阻。如聚合中存在List&lt;值对象&gt;，那么在数据库中建立1:N的关联需要将值对象单独建表，此时是有id的，建议不要将该id暴露到资源库外部，对外隐蔽。</p>
</blockquote>
<hr>
<h4 id="2-4、软件设计类概念"><a href="#2-4、软件设计类概念" class="headerlink" title="2.4、软件设计类概念"></a>2.4、软件设计类概念</h4><p>软件设计中的一些常见术语、常见技术等概念。</p>
<h5 id="模块（Module）"><a href="#模块（Module）" class="headerlink" title="模块（Module）"></a>模块（Module）</h5><p>模块（Module）一组类或者对象组成的集合。</p>
<p>在 DDD 实践中推荐使用限界上下文和聚合来指导模块划分。同时，如果不是特别复杂的业务逻辑也可以不遵循该模式。</p>
<h5 id="仓储（Repository）"><a href="#仓储（Repository）" class="headerlink" title="仓储（Repository）"></a>仓储（Repository）</h5><p>仓储（Repository）是以持久化领域模型为职责的类。</p>
<p>仓储的目的是屏蔽业务逻辑和持久化基础设施的差异。例如，对于同样的持久化业务需求，在采用关系型数据库和非关系型数据库作为存储基础设施时的实现细节是有所不同的。</p>
<p>软件的设计往往是围绕着对数据的修改完成的。经验不多的开发者往往会认为，软件的开发过程就是对数据库的增删改查。但实际上基于该认知的软件设计让软件难以维护。</p>
<p>对于采用关系数据库作为存储基础设施的项目，仓库层可以被 ORM 实现。若不使用 ORM，则需自己实现仓库。</p>
<h5 id="服务（Service）"><a href="#服务（Service）" class="headerlink" title="服务（Service）"></a>服务（Service）</h5><p>服务（Service）是领域模型的操作者，负责领域内的业务规则的实现。</p>
<p>领域模型用于承载数据和系统状态，服务承载业务逻辑的实践。</p>
<p>在实践中如果使用主、客体的思维来进行设计，则服务为主体，领域模型为客体。使用拟人化的方式来对服务进行命名，可以让开发者更容易理解。比如，一个维护客户数据的 CRM 应用中，客户数据被抽象为模型： Client，对应的服务可以设计为：ClientManager。</p>
<h5 id="工厂（Factory）"><a href="#工厂（Factory）" class="headerlink" title="工厂（Factory）"></a>工厂（Factory）</h5><p>工厂（Factory）是以构建领域模型（实体或值对象）为职责的类或方法。</p>
<p>工厂可以利用不同的业务参数构建不同的领域模型。对于简单的业务逻辑实现可以不使用工厂。工厂的实现不一定是类的形式，也可以是具备工厂功能的方法。</p>
<p>在面向对象程序设计中，工厂是一种设计模式。在广义的工厂模式中，工厂可以根据不同的规则的业务需求构造不同的对象。例如在 Redis 连接客户端的实现中，可以使用 Redis 单机、哨兵、集群等不同的方式来构建 Redis 连接客户端。</p>
<h5 id="策略（Strategy）"><a href="#策略（Strategy）" class="headerlink" title="策略（Strategy）"></a>策略（Strategy）</h5><p>策略（Strategy）是业务规则的实现方式。</p>
<p>例如通知业务，可以使用不同的渠道来实现，不同渠道的实现逻辑可以认为是不同的策略。 在面向对象程序设计中，策略模式也是一种设计模式，是多态的一种实现模式。</p>
<p>策略通常会搭配着接口来设计。如果说接口是一种契约，那策略就是契约的履约方式。</p>
<h5 id="规格（Specification）"><a href="#规格（Specification）" class="headerlink" title="规格（Specification）"></a>规格（Specification）</h5><p>规格（Specification） 是一些特殊的业务规则。通常表现为用于校验（e.g. 数据格式，业务逻辑）、查询和搜索条件。</p>
<p>在实践中，规格既可以被设计为灵活的查询或校验条件，也可以被抽象出来以便复用。</p>
<p>例如，在 JPA、MongoDB、ElastiSearch和一些具有查询能力的 ORM 都大量使用这种设计方式，同样的在应用程序中我们也可以参考这种设计模式，把业务的规则提取出来。</p>
<h5 id="分层架构（逻辑）"><a href="#分层架构（逻辑）" class="headerlink" title="分层架构（逻辑）"></a>分层架构（逻辑）</h5><p>分层架构是指在软件设计过程中按照既定的原则将不同的功能实现拆分到不同的层级进行实现的一种设计方式。每个层级有独立的职责，多个层次协同以提供完整功能。按照 DDD 的分层模型，通常可以划分为:接入层、应用层、领域层、基础设施层</p>
<p>分层架构在具体的软件中可以表现为不同的形式。例如，在分布式系统中，不同层级的软件实现，可以表现为独立部署的服务。而在单体系统中，分层可以用不同的模块或包来实现。</p>
<p>分层架构的设计理念与计算机网络的层级结构类似，上层依赖下层的实现，而下层实现无需关心上层实现。例如，HTTP 协议构建在 TCP 协议之上，TCP 协议只负责提供传输层的能力，而不需要知道具体的应用层协议。</p>
<p>分层架构中层级的数量需要依照系统复杂度来定，并不需要死板地按照 DDD 推荐的四层来进行设计。在简单的系统中，可以通过减少分层来避免样板代码，减少冗余。例如，在 web 系统中有时候只有一种接入方式，接入层和应用层能力高度重叠，可以考虑直接使用应用层代替接入层。</p>
<p>软件框架的使用，通常会引入新的层级，从而影响系统整体的分层架构。例如，ORM 框架本身就提供了对 Repository 的一层抽象。</p>
<h5 id="接入层（Interface）"><a href="#接入层（Interface）" class="headerlink" title="接入层（Interface）"></a>接入层（Interface）</h5><p>接入层负责的是系统的输入和输出。</p>
<p>接入层只关心沟通协议，不关心业务相关的数据校验。 接入层的实现是与业务应用强相关的，不同的业务应用有不同的实现方式。例如，对于普通的 Web 应用，基于 HTTP 协议的 API 是一种接入层实现方式；对于IoT传感器的数据上传业务，接入层的实现可能需要基于 websocket 或 MQTT 协议。</p>
<p>接入层的特点：</p>
<ul>
<li>接入层对应用数据透明，只关心数据格式而不关心数据的内容</li>
<li>在大部分单体系统中接入层通常被框架实现。例如，在 Spring Boot 框架中，HTTP 协议的 API 设计不需要关注 HTTP 协议本身。</li>
<li>在分布式系统中接入层通常被网关实现。</li>
</ul>
<h5 id="应用层（Application）"><a href="#应用层（Application）" class="headerlink" title="应用层（Application）"></a>应用层（Application）</h5><p>应用层，组织业务场景，编排业务，隔离场景对领域层的差异。</p>
<p>应用层遵循面向对象核心思想中的 “关注点分离” 理念。应用层的关注点在于业务场景的处理。例如，对于一个服务多种类型用户的应用，to C 的网页界面和后台管理界面对应的是不同的业务场景。对于新用户注册这个业务来说，通过 to C 的网页注册和通过后台管理界面进行后台注册是不同的业务场景。然而，“用户注册”在系统层面的基本逻辑是一样的。所以，“用户注册”的基本业务逻辑可以交由领域层来实现。而两种不同渠道进行用户注册所需要进行的身份验证等逻辑，可以设计在应用层进行实现。这样便能达到关注点分离，复用核心业务逻辑的目的。</p>
<p>应用层的特点：</p>
<ul>
<li>关心处理完一个完整的业务</li>
<li>该层只负责业务编排，对象转换，而具体的业务逻辑由领域层实现</li>
<li>虽不关心请求从何处来，但关心谁来、做什么、有没有权限做</li>
<li>利用不同的领域服务来解决问题</li>
<li>对最终一致性有要求的业务和事务处理需要放到应用层来处理</li>
<li>功能权限放到这层</li>
</ul>
<h5 id="领域层（Domain）"><a href="#领域层（Domain）" class="headerlink" title="领域层（Domain）"></a>领域层（Domain）</h5><p>领域层，实现具体的业务逻辑、规则，为应用层提供无差别的服务能力。</p>
<p>实际处理业务的地方，领域层需要对应用层提供无差别的服务和能力。例如，对于用户注册的场景，用户既可以通过邮箱自己注册，也可以由管理员在后台进行添加。用户注册的核心逻辑可以由领域层完成，但是对于不同渠道进行用户注册的参数校验和权限验证等逻辑则由应用层实现。</p>
<p>领域层的特点：</p>
<ul>
<li>不关心场景，关心模型完整性和业务规则</li>
<li>不关心谁来，不关心场景完整的业务，关心当前上下文的业务完整</li>
<li>强一致性事务放到这层，聚合的事务是 “理所当然的”</li>
<li>对应到分布式系统中的 domain service、后台等概念</li>
<li>领域层做业务规则验证</li>
<li>数据权限放到这层（比如只允许删除自己创建的商品），因为数据权限涉及业务规则</li>
<li>根据业务情况，参考反范式理论，跨上下文使用值对象做必要的数据冗余</li>
</ul>
<h5 id="基础设施层（Infrastructure）"><a href="#基础设施层（Infrastructure）" class="headerlink" title="基础设施层（Infrastructure）"></a>基础设施层（Infrastructure）</h5><p>基础设施层，提供具体的技术实现，比如存储，基础设施对业务保持透明。</p>
<p>对于基础设施层来说，基础设施层并不是指 MySQL、Redis 等外部组件，而是外部组件的适配器，Hibernate、Mybatis、Redis Template 等，因此在 DDD 中适配器模式被多次提到，基础设施层往往不能单独存在，还是要依附于领域层。技术设施层的适配器还包括了外部系统的适配，互联网产品系统的外部系统非常多，常见的有活体监测、风控系统、税务发票等。</p>
<p>技术设施层的特点：</p>
<ul>
<li>关心存储、通知、第三方系统等外部设施（防腐层隔离）</li>
<li>基础设施的权限由配置到应用的凭证控制，例如数据库、对象存储的凭证，技术设施层不涉及用户的权限</li>
</ul>
<h5 id="部署架构（物理）"><a href="#部署架构（物理）" class="headerlink" title="部署架构（物理）"></a>部署架构（物理）</h5><p>部署架构是指具体的架构实现</p>
<p>主要是在分布式系统、单体系统，甚至在客户端软件中体现。</p>
<p>把逻辑架构和部署架构区分开可以很好的理解软件设计上和部署上的不同，对于应用构架来说，逻辑上的设计不一定对应部署结构。</p>
<p>这样就很好理解 DDD 在不同场合中的使用方式，避免生搬硬套。当 DDD 的分层结构在单体应用中使用时，每层可能使用包、模块来表达，在微服务中使用时候，每层可能由不同角色的微服务来完成。</p>
<h5 id="微服务（Micro-Service）"><a href="#微服务（Micro-Service）" class="headerlink" title="微服务（Micro Service）"></a>微服务（Micro Service）</h5><p>微服务是一种低耦合的分布式应用系统。</p>
<p>维基百科的定义是：一种软件开发技术 - 面向服务的体系结构（SOA）架构样式的一种变体，将应用程序构造为一组松散耦合的服务。这个定义没有问题，但是忽略了一个重要的信息，微服务是一种分布式架构，微服务必须面对分布式系统的各种问题。</p>
<p>分布式系统是通过计算机网络连接、协同工作的 IT 系统，因此在使用 DDD 时候，需要为这种系统做适配，而不是简单的做出切分。</p>
<h5 id="单体（Monomer）"><a href="#单体（Monomer）" class="headerlink" title="单体（Monomer）"></a>单体（Monomer）</h5><p>单体是主要业务实现和部署在单一服务器上的应用。</p>
<p>单体系统是相对于微服务来说的，其特点是主要的实现在单一的服务器中。</p>
<h5 id="分布式应用系统（Distributed）"><a href="#分布式应用系统（Distributed）" class="headerlink" title="分布式应用系统（Distributed）"></a>分布式应用系统（Distributed）</h5><p>分布式应用系统是建立在计算机网络之上的应用软件系统，不同单元通过计算机网络集成。</p>
<hr>
<h4 id="2-5、事件风暴类概念"><a href="#2-5、事件风暴类概念" class="headerlink" title="2.5、事件风暴类概念"></a>2.5、事件风暴类概念</h4><h5 id="事件风暴（Event-Storming）"><a href="#事件风暴（Event-Storming）" class="headerlink" title="事件风暴（Event Storming）"></a>事件风暴（Event Storming）</h5><p>事件风暴是一种以工作坊的形式，使用 DDD 建模的方式。</p>
<p>事件风暴的发明人是 Alberto Brandolini ，它来源于 Gamestorming，通过工作坊的方式将领域专家和技术专家拉到一起，进行建模。</p>
<p>事件风暴是一种捕获行为需求的方法，类似传统软件的开发用例分析。所有人员（领域专家和技术专家） 对业务行为进行一次发散，并最终收敛达到业务的统一。</p>
<h5 id="领域事件（Domain-Event）"><a href="#领域事件（Domain-Event）" class="headerlink" title="领域事件（Domain Event）"></a>领域事件（Domain Event）</h5><p>事件是系统状态发生的某种客观现象，领域事件是和领域有关的事件。</p>
<p>领域事件（Domain Event），是在业务上真实发生的客观事实，这些事实对系统会产生关键影响，是观察业务系统变化的关键点。领域事件一般是领域专家关心的。</p>
<p>事件的评价方式是系统状态是否发生变化。系统状态变化意味着领域模型被业务规则操作，这是观察系统业务的好方法。</p>
<p>识别领域事件的线索有：</p>
<ul>
<li>是否产生了某种数据</li>
<li>系统状态是否发生变化，无论这种状态存放到数据库还是内存</li>
<li>是否对外发送了某些消息</li>
</ul>
<h5 id="业务规则（Policy）"><a href="#业务规则（Policy）" class="headerlink" title="业务规则（Policy）"></a>业务规则（Policy）</h5><p>业务规则是指对业务逻辑的定义和约束。</p>
<p>不同的业务规则往往意味着不同的领域事件被触发，未来在技术实现时可能是一些分支条件，对应 DDD 实现中可能通过领域服务、规格、策略等方式实现。</p>
<p>业务规则的识别是为了将数据和算法分开。</p>
<h5 id="命令（Command）"><a href="#命令（Command）" class="headerlink" title="命令（Command）"></a>命令（Command）</h5><p>命令是执行者发起的操作，构成要件是执行者和行为。</p>
<p>命令可以类比于 UML 分析中的业务用例，是某个场景中领域事件的触发动作。</p>
<h5 id="执行者（Actor）"><a href="#执行者（Actor）" class="headerlink" title="执行者（Actor）"></a>执行者（Actor）</h5><p>执行者是指使用系统的主体，是导致系统状态变化的触发源。</p>
<p>执行者有点像 UML 的涉众，不过区别是执行者不仅是用户，还包括外部系统和本系统。 在事件风暴中，执行者可以是：用户、外部系统、本系统、定时器。</p>
<h5 id="用户（User）"><a href="#用户（User）" class="headerlink" title="用户（User）"></a>用户（User）</h5><p>用户是执行者的一种，是指使用软件或服务的人。</p>
<p>用户可以有不同的角色，通常我们会把不同角色的相似行为作为不同的命令来处理，有可能得到同样的事件。比如系统出现了商品已添加的事件，有可能有多个触发的场景： 1. 系统管理员在后台中添加 2. 商户在自己的管理平台中添加 3. 导入任务在特定时间添加</p>
<p>1 2 是用户的行为，不过是不同的角色。</p>
<h5 id="外部系统（Out-System）"><a href="#外部系统（Out-System）" class="headerlink" title="外部系统（Out System）"></a>外部系统（Out System）</h5><p>外部系统是执行者的一种，系统开放 API 的调用发起者。</p>
<p>有一些系统会提供对外的 API 给外部系统，这时候外部系统也会发出命令让系统产生事件，这里的外部系统特指作为执行者的外部系统。</p>
<h5 id="本系统（System）"><a href="#本系统（System）" class="headerlink" title="本系统（System）"></a>本系统（System）</h5><p>本系统是执行者的一种，指系统本身。</p>
<p>事件的触发可以由用户、外部系统、定时器触发，也可以由上一个事件触发，因此这里的触发者（主体）就是系统本身。</p>
<h5 id="定时器（Timer）"><a href="#定时器（Timer）" class="headerlink" title="定时器（Timer）"></a>定时器（Timer）</h5><p>定时器是执行者的一种，通常是定时任务。</p>
<p>定时器可以作为执行者，不过需要区别于本系统这个触发源。定时器可以看待为外部一个时间信号源，类似于计算机中主机中的振荡器。</p>
<h5 id="参与人（Participants）"><a href="#参与人（Participants）" class="headerlink" title="参与人（Participants）"></a>参与人（Participants）</h5><p>作为工作坊的参与人员（应区别于执行者）。</p>
<p>参与人只是一种角色，而非具体的一个人，可以是多个自然人做群体参与，也可以一人分饰不同的角色。</p>
<p>在开始工作坊之前，参与人需要满足一些条件：</p>
<ul>
<li>参与人需要对解决的问题和产出目标达成共识</li>
<li>参与人需要 DDD 的基本知识或接受过基本培训</li>
<li>领域专家、技术专家需要能全程参加</li>
</ul>
<h5 id="领域专家（Domain-Expert）"><a href="#领域专家（Domain-Expert）" class="headerlink" title="领域专家（Domain Expert）"></a>领域专家（Domain Expert）</h5><p>领域专家是指熟悉业务规则的人，在工作坊中一般是能敲定业务规则的人。</p>
<p>在实际的事件风暴工作坊中，领域专家是一个比技术专家更难获得人，一个合格的、能让工作坊进展下去的领域专家需要有几个要求：</p>
<ul>
<li>了解现有业务个情况</li>
<li>能对具体的业务方向做出结论性的输出</li>
<li>在做工作坊时，需要分清现状（As-IS）和目标（To-Be）业务，现状业务很多人都能说出来，不过真正的领域专家是能对目标业务做出描述的人。</li>
</ul>
<h5 id="技术专家（Tech-Expert）"><a href="#技术专家（Tech-Expert）" class="headerlink" title="技术专家（Tech Expert）"></a>技术专家（Tech Expert）</h5><p>技术专家是指熟悉技术方案和实现方式的人，能给出可行的技术方案和了解基础设计的限制条件。</p>
<p>技术专家需要能对现有的技术做出描述，而未来的技术选型可能是动态的，能有一定预见性最好。技术专家往往是当前团队中最熟悉架构和代码的人。</p>
<h5 id="主持人（Facilitator）"><a href="#主持人（Facilitator）" class="headerlink" title="主持人（Facilitator）"></a>主持人（Facilitator）</h5><p>主持人工作坊流程的推动者，以及 DDD 方法论的守护者。</p>
<p>在一些工作坊中，主持人往往是外部的咨询师，他们有大量的实践经验，需要能对 DDD 的概念、方法有成体系的研究，并能推动工作坊进行。</p>
<h3 id="三、DDD-的优势和应用场景"><a href="#三、DDD-的优势和应用场景" class="headerlink" title="三、DDD 的优势和应用场景"></a>三、DDD 的优势和应用场景</h3><p>优势</p>
<ul>
<li>紧密贴合业务需求：通过与领域专家合作构建领域模型，能够确保软件系统准确地反映业务规则，减少因对业务理解偏差导致的软件功能不符合实际需求的情况。</li>
<li>提高软件的可维护性和可扩展性：分层架构和限界上下文的划分使得系统的各个部分职责明确，当业务需求发生变化时，可以在相应的层次或限界上下文中进行修改，而不会对整个系统造成太大的影响。</li>
<li>促进团队协作：DDD 强调领域专家和软件开发者的协作，有助于团队成员更好地理解业务，特别是对于新加入团队的成员，可以通过领域模型和限界上下文快速了解业务领域和系统架构。</li>
</ul>
<p>应用场景</p>
<ul>
<li>复杂业务领域的系统开发：如金融、电信、物流等行业的核心业务系统，这些领域业务规则复杂、业务流程长，DDD 可以有效地帮助梳理业务逻辑，构建高质量的软件系统。</li>
<li>企业级应用集成（EAI）：在整合多个不同的企业内部系统或外部系统时，DDD 可以通过明确各系统的领域模型和限界上下文，更好地实现系统之间的交互和集成。</li>
</ul>
<p>参考文章：<br><a href="https://domain-driven-design.org/zh/ddd-concept-reference.html" target="_blank" rel="noopener">DDD 概念参考</a>        </p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2024/08/25/2024-08-25-架构-常见架构/" rel="next" title="《架构》常见架构">
                <i class="fa fa-chevron-left"></i> 《架构》常见架构
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2024/09/03/2024-09-03-架构-DDD应用架构/" rel="prev" title="《架构》DDD应用架构">
                《架构》DDD应用架构 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/touxiang.jpg" alt="chw">
            
              <p class="site-author-name" itemprop="name">chw</p>
              <p class="site-description motion-element" itemprop="description">do somthing</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">114</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">82</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">26</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#一、DDD"><span class="nav-text">一、DDD</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#二、DDD-的主要概念"><span class="nav-text">二、DDD 的主要概念</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-1、通过类相关概念"><span class="nav-text">2.1、通过类相关概念</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#领域驱动设计（DDD）"><span class="nav-text">领域驱动设计（DDD）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#模型（Model）"><span class="nav-text">模型（Model）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#领域模型（Domain-Model）"><span class="nav-text">领域模型（Domain Model）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#建模（Modeling）"><span class="nav-text">建模（Modeling）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#⭐️领域建模"><span class="nav-text">⭐️领域建模</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#模型驱动设计（Model-Driven-Design）"><span class="nav-text">模型驱动设计（Model-Driven Design）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#软件设计（The-Software-Design）"><span class="nav-text">软件设计（The Software Design）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#战略设计（Strategic-Design）"><span class="nav-text">战略设计（Strategic Design）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#战术设计（Tactical-design）"><span class="nav-text">战术设计（Tactical design）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#软件（Software）"><span class="nav-text">软件（Software）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#原则（Principle）"><span class="nav-text">原则（Principle）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#通用语言（Ubiquitous）"><span class="nav-text">通用语言（Ubiquitous）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#聚焦核心域（Focus）"><span class="nav-text">聚焦核心域（Focus）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#协作共创（Collaboration）"><span class="nav-text">协作共创（Collaboration）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#持续建模（Continuous）"><span class="nav-text">持续建模（Continuous）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#上下文（Context）"><span class="nav-text">上下文（Context）</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-2、领域分析类概念"><span class="nav-text">2.2、领域分析类概念</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#问题空间（Problem-Space）"><span class="nav-text">问题空间（Problem Space）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#领域（Domain）"><span class="nav-text">领域（Domain）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#子域（Sub-Domain）"><span class="nav-text">子域（Sub Domain）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#核心域（Core-Domain）"><span class="nav-text">核心域（Core Domain）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#支撑域（Support-Domain）"><span class="nav-text">支撑域（Support Domain）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#通用域（General-Domain）"><span class="nav-text">通用域（General Domain）</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-3、建模类概念"><span class="nav-text">2.3、建模类概念</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#解空间（Solution-Space）"><span class="nav-text">解空间（Solution Space）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#领域模型（Model）"><span class="nav-text">领域模型（Model）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#限界上下文（-Bounded-context）"><span class="nav-text">限界上下文（ Bounded context）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#实体（Entity）"><span class="nav-text">实体（Entity）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#值对象（Value-Object）"><span class="nav-text">值对象（Value Object）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#聚合（Aggregate）"><span class="nav-text">聚合（Aggregate）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#聚合根（-Aggregate-Root）"><span class="nav-text">聚合根（ Aggregate Root）</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-4、软件设计类概念"><span class="nav-text">2.4、软件设计类概念</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#模块（Module）"><span class="nav-text">模块（Module）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#仓储（Repository）"><span class="nav-text">仓储（Repository）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#服务（Service）"><span class="nav-text">服务（Service）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#工厂（Factory）"><span class="nav-text">工厂（Factory）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#策略（Strategy）"><span class="nav-text">策略（Strategy）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#规格（Specification）"><span class="nav-text">规格（Specification）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#分层架构（逻辑）"><span class="nav-text">分层架构（逻辑）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#接入层（Interface）"><span class="nav-text">接入层（Interface）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#应用层（Application）"><span class="nav-text">应用层（Application）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#领域层（Domain）"><span class="nav-text">领域层（Domain）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#基础设施层（Infrastructure）"><span class="nav-text">基础设施层（Infrastructure）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#部署架构（物理）"><span class="nav-text">部署架构（物理）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#微服务（Micro-Service）"><span class="nav-text">微服务（Micro Service）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#单体（Monomer）"><span class="nav-text">单体（Monomer）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#分布式应用系统（Distributed）"><span class="nav-text">分布式应用系统（Distributed）</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-5、事件风暴类概念"><span class="nav-text">2.5、事件风暴类概念</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#事件风暴（Event-Storming）"><span class="nav-text">事件风暴（Event Storming）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#领域事件（Domain-Event）"><span class="nav-text">领域事件（Domain Event）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#业务规则（Policy）"><span class="nav-text">业务规则（Policy）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#命令（Command）"><span class="nav-text">命令（Command）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#执行者（Actor）"><span class="nav-text">执行者（Actor）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#用户（User）"><span class="nav-text">用户（User）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#外部系统（Out-System）"><span class="nav-text">外部系统（Out System）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#本系统（System）"><span class="nav-text">本系统（System）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#定时器（Timer）"><span class="nav-text">定时器（Timer）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#参与人（Participants）"><span class="nav-text">参与人（Participants）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#领域专家（Domain-Expert）"><span class="nav-text">领域专家（Domain Expert）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#技术专家（Tech-Expert）"><span class="nav-text">技术专家（Tech Expert）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#主持人（Facilitator）"><span class="nav-text">主持人（Facilitator）</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#三、DDD-的优势和应用场景"><span class="nav-text">三、DDD 的优势和应用场景</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">chw</span>


       <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
 

</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>








        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      
    </span>
  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
